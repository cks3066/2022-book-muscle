### Chapter 13. 스코프

---

#### 1. 스코프란 무엇인가?

- 스코프란, 식별자가 유효한 범위를 의미한다.

> 그렇다면, 유효한 범위는 어떻게 결정되는 것일까?🤔
> 모든 식별자는 **자신이 선언된 위치에 의해** 다른 코드가 식별자 자신을 참조할 수 있는 **유효 범위가 결정**된다.

<br>

#### 2. 스코프의 장점

- 스코프를 통해 식별자인 변수 이름의 충돌을 방지하여 같은 이름의 변수를 사용할 수 있게 한다.
- 같은 스코프 : 같은 이름의 식별자 사용 ❌
- 다른 스코프 : 같은 이름의 식별자 사용 ⭕️

<br>

- var 키워드로 선언된 변수는 같은 스코프 내에서 중복 선언이 허용된다? 🆗

  ```jsx
  function foo() {
    var x = 1;

    //자바스크립트 엔진은 var 키워드가 없는 것처럼 동작한다.
    //변수 x에 2를 재 할당한다.
    var x = 2;

    console.log(x); //2
  }
  ```

<br>

#### 3. 스코프는 어떻게 구성되는 것일까?

- 모든 스코프는 하나의 계층적 구조로 연결된다. 이것을 **스코프 체인**이라고 한다.

> 그렇다면, **JS 엔진은 스코프 체인을 어떻게 활용할까?** 🤔
> 변수를 참조할 때, JS 엔진은 스코프 체인을 통해 변수를 참조하는 코드의 스코프에서 시작하여 상위 스코프 방향으로 이동하며 선언된 변수를 검색한다.

<br>

#### 4. 렉시컬 스코프? 정적 스코프? 동적 스코프?

- 문제 1 ~ 2번을 실행했을 때 어떤 것이 호출될까?

  ```jsx
  var x = "global";

  function foo() {
    var x = "local";
    bar();
  }

  function bar() {
    console.log(x);
  }

  //문제 1
  foo();

  //문제 2
  bar();
  ```

<br>

- 앞서 설명한 부분과 중복되지만, 프로그래밍 언어에서 함수 스코프는 크게 두 가지 패턴으로 결정된다.

  - **1. 함수를 어디서 호출했는지에 따라** 상위 스코프를 결정한다.
  - **2. 함수를 어디서 정의했는지에 따라** 상위 스코프를 결정한다.

<br>

- 1번 방식을 **동적 스코프**라 한다.
- 2번 방식을 **렉시컬 스코프** 또는 **정적 스코프**라 한다.
- JS는 2번 방식을 따르므로, **함수가 호출된 위치는 상위 스코프 결정에 어떠한 영향을 주지 않는다.**

<br>

- 그렇다면, 문제 1 ~ 2번은 어떤 것이 출력이 될까?🤔
- 문제 1 : "global"
- 문제 2 : "global"

<br>

#### 5. 결론🎯

- 모든 식별자는 **자신이 선언된 위치에 의해** 다른 코드가 식별자 자신을 참조할 수 있는 **유효 범위가 결정**된다.
